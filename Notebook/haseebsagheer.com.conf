<VirtualHost *:80>
    ServerName haseebsagheer.com
    ServerAlias www.haseebsagheer.com

    # Force HTTPS for everything
    Redirect permanent / https://haseebsagheer.com/
</VirtualHost>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerName haseebsagheer.com
    ServerAlias www.haseebsagheer.com
    DocumentRoot /var/www/html

    # --- Normal site root permissions (leave as-is) ---
    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # --- Fake News Detector ONLY at this path ---
    # normalize no-trailing-slash â†’ trailing slash
    Redirect 301 /fake-news-detector /fake-news-detector/

    # keep original Host header and pass HTTPS hint
    ProxyPreserveHost On
    RequestHeader set X-Forwarded-Proto "https"

    # reverse proxy to your Gunicorn app (running via systemd on 127.0.0.1:8010)
    ProxyPass        /fake-news-detector/  http://127.0.0.1:8010/
    ProxyPassReverse /fake-news-detector/  http://127.0.0.1:8010/

    # --- SSL certs (leave as-is) ---
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/haseebsagheer.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/haseebsagheer.com/privkey.pem
</VirtualHost>
</IfModule>
